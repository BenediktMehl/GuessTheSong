services:
  backend:
    entrypoint: /app/entrypoint.sh
    user: "0"
    environment:
      WS_USE_TLS: "true"
      WS_TLS_CERT_PATH: "/tmp/certs/fullchain.pem"
      WS_TLS_KEY_PATH: "/tmp/certs/privkey.pem"
      WS_ALLOWED_ORIGINS: https://www.guess-my-song.de,https://guess-the-song.duckdns.org
    tmpfs:
      - /tmp/certs:mode=0777
    volumes:
      - /etc/letsencrypt/live/guess-the-song.duckdns.org/fullchain.pem:/source-certs/fullchain.pem:ro
      - /etc/letsencrypt/live/guess-the-song.duckdns.org/privkey.pem:/source-certs/privkey.pem:ro

volumes:
  cert-copy:
